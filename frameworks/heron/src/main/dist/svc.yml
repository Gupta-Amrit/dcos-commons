name: {{FRAMEWORK_NAME}}
scheduler:
  principal: {{FRAMEWORK_PRINCIPAL}}
  user: {{FRAMEWORK_USER}}
pods:
  heron:
    count: {{NODE_COUNT}}
    placement: '{{{NODE_PLACEMENT}}}'
    uris:
      - {{BOOTSTRAP_URI}}
      - {{EXECUTOR_URI}}
      - {{JAVA_URI}}
      - {{LIBMESOS_URI}}
      - {{HERON_INSTALLER_URI}}
    {{#ENABLE_VIRTUAL_NETWORK}}
    networks:
      {{VIRTUAL_NETWORK_NAME}}:
        labels: {{VIRTUAL_NETWORK_PLUGIN_LABELS}}
    {{/ENABLE_VIRTUAL_NETWORK}}
    volume:
          path: container-path
          type: {{NODE_DISK_TYPE}}
          size: {{NODE_DISK}}
    resource-sets:
      server-resources:
        cpus: {{NODE_CPUS}}
        memory: {{NODE_MEM}}
        ports:
          tracker:
            port: 8888
          ui:
            port: 8889
    tasks:
      apiserver:
        goal: RUNNING
        cmd: |
          chmod +x heron-*.sh
          ./heron-install-*.sh --user
          heron-apiserver \
          --base-template mesos \
          --cluster sandbox
        resource-set: server-resources
      tracker:
        goal: RUNNING
        cmd: |
          chmod +x heron-*.sh
          ./heron-install-*.sh --user
          heron-tracker
        resource-set: server-resources
      ui:
        goal: RUNNING
        cmd: |
          chmod +x heron-*.sh
          ./heron-install-*.sh --user
          heron-ui
        resource-set: server-resources
plans:
  deploy:
    strategy: serial
    phases:
      node-deploy:
        strategy: serial
        pod: heron
        steps:
         - default: [[apiserver, tracker, ui]]
